参考文章：   
- [微任务、宏任务与Event-Loop](https://juejin.im/post/5b73d7a6518825610072b42b)
- [超级好的js Event Loop 讲解](https://www.cnblogs.com/web-easy/p/7889184.html)
- [非常好的例子：进程和线程之间的关系](https://www.cnblogs.com/yuanchenqi/articles/6755717.html)

## Event Loop  是什么？
- 是一种程序结构
- 发送通信给其他进程 协助处理 I/O【消息/事件】；
  
## javascript 的单线程的I/Os

进程 包含 线程

### 组成与执行过程 
组成部分主要分为两个线程： 
- 主线程： 执行程序；
- Event Loop  线程【消息线程】： 有I/O 处理时，负责主线程与其他 `进程` 消息/事件通知；  

#### 执行过程
- 主线程：主线程是栈执行， 按照先进先出顺序执行任务；
- Event Loop：遇到 I/O处理，主线程跳过 I/O 继续向后执行；通知其他线程/进程处理；
- 其他线程/进程： I/O 程序处理完，Event Loop 把执行结果的函数返回给执行队列；
- 任务队列： 执行队列是堆，按照后进先出排序，等待主线程执行为空，从队列里读取最近的任务到主线程
- 主线程： 主线程执行事先写好的回调函数，完成该异步I/O处理；js主线程循环读取队列；

### 优点
- 单线程，只做程序执行，没有I/O 等待事件；
- 没有等待时间，占用资源少，支持大并发；
- 执行环境独立，执行结果不出错；【多线程共享执行状态或结果】；


### 缺点
- 代码异步黑洞


## 关系

### 进程和线程的关系
- 包含关系： 一个进程包含多个线程， 一个线程只能属于一个进程；
- 时间： cpu 一个时间点只能执行一个进程；
- 资源： 一个进程的资源， 所有线程都共享该资源；


### 主线程和队列的关系
- 任务队列-堆：只有一个 任务队列-堆
- 主线程-栈：只有一个 主线程-栈 和 多个堆
- 关系： 在一个进程里， 含有多个线程队列， 但共享一个主线程-栈；
 
### 串行/并行/并发关系【todo深入】
- 串行： 同步执行，需要等待每个结果
- 并行： 多个程序同时执行， 但在一个时间点，cpu只计算其中一个
- 并发【todo】： 处理多个任务，但任务的执行是同步【表示有处理多个任务的能力】

### 应用

#### web worker 多线程 
含有多个子线程， 但收到主线程的支配， 不会影响主线程的执行导致阻塞；


#### service worker 
独立于浏览器后台执行的程序，



